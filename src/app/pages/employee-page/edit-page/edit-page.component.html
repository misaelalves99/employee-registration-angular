<!-- src/app/pages/employee-page/edit-page/edit-page.component.html -->

<div *ngIf="loading">Carregando...</div>
<div *ngIf="!loading && !employee">Funcionário não encontrado</div>

<div *ngIf="employee as emp" class="container">
  <h1 class="title">Editar Funcionário</h1>

  <div *ngIf="errors.length" class="errorContainer">
    <p *ngFor="let err of errors" class="errorText">{{ err }}</p>
  </div>

  <form (ngSubmit)="onSubmit()" class="form">
    <div class="field" *ngFor="let field of textFields">
      <label class="label">{{ getLabel(field) }}</label>
      <input
        type="text"
        class="input"
        [(ngModel)]="emp[field]"
        [name]="field"
        [required]="!isOptional(field)"
      />
    </div>

    <div class="field">
      <label class="label">Cargo</label>
      <select class="input" [(ngModel)]="emp.position" name="position" required>
        <option *ngFor="let pos of POSITIONS" [value]="pos">{{ pos }}</option>
      </select>
    </div>

    <div class="field">
      <label class="label">Departamento</label>
      <select class="input" [(ngModel)]="emp.departmentId" name="departmentId">
        <option value="">Nenhum</option>
        <option *ngFor="let dep of departments" [value]="dep.id">{{ dep.name }}</option>
      </select>
    </div>

    <div class="field">
      <label class="label">Salário</label>
      <input
        type="number"
        step="0.01"
        class="input"
        [(ngModel)]="emp.salary"
        name="salary"
        required
      />
    </div>

    <div class="field">
      <label class="label">Data de Admissão</label>
      <input
        type="date"
        class="input"
        [(ngModel)]="emp.admissionDate"
        name="admissionDate"
        required
      />
    </div>

    <div class="checkboxContainer">
      <label>
        <input type="checkbox" [(ngModel)]="emp.isActive" name="isActive" />
        Ativo
      </label>
    </div>

    <div class="buttons">
      <button type="submit" class="btn btnPrimary">Salvar</button>
      <a routerLink="/funcionarios" class="btn btnSecondary">Voltar</a>
    </div>
  </form>
</div>
