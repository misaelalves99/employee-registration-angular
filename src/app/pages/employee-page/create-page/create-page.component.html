<!-- src/app/pages/employee-page/create-page/create-page.component.html -->

<!-- src/app/pages/employee-page/create-page/create-page.component.html -->

<div class="container" *ngIf="!loading; else loadingTemplate">
  <h1 class="title">Criar Funcionário</h1>

  <form (ngSubmit)="handleSubmit()" class="form">
    <!-- Campos de texto -->
    <div class="field" *ngFor="let field of textFields">
      <label class="label">{{ getLabel(field) }}</label>
      <input
        type="text"
        class="input"
        [(ngModel)]="formData[field]"
        [name]="field"
        [required]="!isOptional(field)"
      />
    </div>

    <!-- Cargo -->
    <div class="field">
      <label class="label">Cargo</label>
      <select class="input" [(ngModel)]="formData.position" name="position" required>
        <option value="">Selecione...</option>
        <option *ngFor="let pos of positions" [value]="pos">{{ pos }}</option>
      </select>
    </div>

    <!-- Departamento -->
    <div class="field">
      <label class="label">Departamento</label>
      <select class="input" [(ngModel)]="formData.departmentId" name="departmentId">
        <option [value]="undefined">Selecione...</option> <!-- Use undefined for 'Nenhum' -->
        <option *ngFor="let dep of departments" [value]="dep.id">{{ dep.name }}</option>
      </select>
    </div>

    <!-- Salário -->
    <div class="field">
      <label class="label">Salário</label>
      <input type="number" step="0.01" class="input" [(ngModel)]="formData.salary" name="salary" required />
    </div>

    <!-- Data de Admissão -->
    <div class="field">
      <label class="label">Data de Admissão</label>
      <input type="date" class="input" [(ngModel)]="formData.admissionDate" name="admissionDate" required />
    </div>

    <!-- Status -->
    <div class="checkboxContainer">
      <label>
        <input type="checkbox" [(ngModel)]="formData.isActive" name="isActive" />
        Ativo
      </label>
    </div>

    <div class="buttons">
      <button type="submit" class="btn btnPrimary">Criar Funcionário</button>
      <a routerLink="/funcionarios" class="btn btnSecondary">Voltar</a>
    </div>
  </form>
</div>

<ng-template #loadingTemplate>
  <p class="loading">Carregando...</p>
</ng-template>
