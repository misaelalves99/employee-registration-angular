<!-- src/app/pages/employee-page/edit-page/edit-page.component.html -->

<div *ngIf="loading">Carregando...</div>
<div *ngIf="!loading && !employee">Funcionário não encontrado</div>

<div *ngIf="employee as emp" class="container">
  <h1 class="title">Editar Funcionário</h1>

  <div *ngIf="errors.length" class="errorContainer">
    <p *ngFor="let err of errors" class="errorText">{{ err }}</p>
  </div>

  <form (ngSubmit)="onSubmit()" class="form">
    <div class="field" *ngFor="let field of textFields">
      <label class="label">{{ getLabel(field) }}</label>
      <input type="text" class="input" [(ngModel)]="emp[field]" [name]="field" [required]="!isOptional(field)" />
    </div>

    <div class="field">
      <label class="label">Cargo</label>
      <select [(ngModel)]="emp.position" name="position" required class="select">
        <option value="">Selecione...</option>
        <option *ngFor="let pos of positions" [value]="pos">{{ pos }}</option>
      </select>
    </div>

    <div class="field">
      <label class="label">Departamento</label>
      <select [(ngModel)]="emp.departmentId" name="departmentId" class="select">
        <option [value]="undefined">Nenhum</option> <!-- Use undefined for 'Nenhum' -->
        <option *ngFor="let dep of departments" [value]="dep.id">{{ dep.name }}</option>
      </select>
    </div>

    <div class="field">
      <label class="label">Salário</label>
      <input type="number" step="0.01" [(ngModel)]="emp.salary" name="salary" required class="input" />
    </div>

    <div class="field">
      <label class="label">Data de Admissão</label>
      <input type="date" [(ngModel)]="emp.admissionDate" name="admissionDate" required class="input" />
    </div>

    <div class="checkboxContainer">
      <input type="checkbox" [(ngModel)]="emp.isActive" name="isActive" />
      <label>Ativo</label>
    </div>

    <div class="buttons">
      <button type="submit" class="btn btnPrimary">Salvar</button>
      <a routerLink="/funcionarios" class="btn btnSecondary">Voltar</a>
    </div>
  </form>
</div>
